!function($,window,document,undefined){function Editor(){this.init()}var editor=undefined,default_settings={enabled:0,mode:"birthday",minimum_age:18,cookie_expiration:365,animation:"pop_in",title:"Verify Your Age",text:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante.",background:"#2997DF",submit_text:"Submit",error_message:"You need to be at least [age] years old to continue.",safe_url:"test",safe_url_enabled:1},settings=undefined;$.age_verifier_get_current_settings_ref=function(){return settings},$.age_verifier_get_current_settings=function(){return $.extend(!0,{},settings)},$.age_verifier_init_editor=function(){settings=$.extend(!0,{},default_settings);var a=undefined;$.age_verifier_get_stored_settings!=undefined&&(a=$.extend(!0,settings,$.age_verifier_get_stored_settings())),a!=undefined&&(settings=$.extend(!0,{},a)),editor=new Editor},Editor.prototype.init=function(){var a=this;$("body").css({opacity:1}),$("html").css({opacity:1}),this.disable_events(),$("#color-box-background").ColorPicker({onChange:function(a,b,c,d){$("#color-box-background").data("color","#"+b),$("#color-box-background").css({background:$("#color-box-background").data("color")}),$("#av-wrap").css({background:$("#color-box-background").data("color")})},onHide:function(b,c,d,e){a.update_settings(),a.redraw()},onBeforeShow:function(){$(this).ColorPickerSetColor($(this).data("color")),$(".color-box-selected").removeClass("color-box-selected"),$(this).addClass("color-box-selected"),a.update_settings(),a.redraw()}}),$(".color-box").each(function(){$(this).css({background:$(this).data("color")})}),this.load_settings(),this.update_form(),this.redraw(),this.enable_events()},Editor.prototype.redraw=function(){var a=$.age_verifier_get_content(settings);0==$("#editor-preview-container").length&&($("body").prepend('<div id="editor-preview-container"></div>'),$("#editor-preview-container").css({position:"absolute",left:$("#editor-preview").offset().left,top:$("#editor-preview").offset().top,width:$("#editor-preview").width(),height:$("#editor-preview").height(),padding:"0 15px 0 15px"})),$("#editor-preview-container").html(a),"birthday"==settings.mode&&$(".birthday-select").chosen({width:"100%",disable_search_threshold:1e6}),$("#av-error").css({height:"auto"})},Editor.prototype.disable_events=function(){$(document).off("change","#editor-wrap input, #editor-wrap textarea, #editor-wrap select"),$(window).off("resize"),$(document).off("click","#button-preview"),$(document).off("click","#button-delete-cookies"),$(document).off("mouseover","#av-title, #av-text, #av-error, #av-submit"),$(document).off("mouseout","#av-title, #av-text, #av-error, #av-submit"),$(document).off("mousemove","#av-title, #av-text, #av-error, #av-submit"),$(document).off("click","#editor-preview-container #av-title"),$(document).off("click","#editor-preview-container #av-text"),$(document).off("click","#editor-preview-container #av-error"),$(document).off("click","#editor-preview-container #av-submit"),$(document).off("click","#button-confirm-edit-title"),$(document).off("click","#button-confirm-edit-text"),$(document).off("click","#button-confirm-edit-submit"),$(document).off("click","#button-confirm-edit-error-message"),$(document).off("click",".color-box")},Editor.prototype.enable_events=function(){var a=this;$(document).on("change","#editor-wrap input, #editor-wrap textarea, #editor-wrap select",function(){a.update_form(),a.update_settings(),a.redraw()}),$(window).on("resize",function(){$("#editor-preview-container").css({position:"absolute",left:$("#editor-preview").offset().left,top:$("#editor-preview").offset().top,width:$("#editor-preview").width(),height:$("#editor-preview").height()})}),$(document).on("click","#button-preview",function(){a.preview()}),$(document).on("click","#button-delete-cookies",function(){a.delete_cookies()});var b=$("#edit-tooltip"),c=$(".bootstrap-wrapper").offset().left,d=$(".bootstrap-wrapper").offset().top;$(document).on("mouseover","#av-title, #av-text, #av-error, #av-submit",function(){b.show()}),$(document).on("mouseout","#av-title, #av-text, #av-error, #av-submit",function(){b.hide()}),$(document).on("mousemove","#av-title, #av-text, #av-error, #av-submit",function(a){b.css({left:a.pageX-c+10,top:a.pageY-d-30})}),$(document).on("click","#editor-preview-container #av-title",function(){a.load_settings(),$("#modal-edit-title").modal()}),$(document).on("click","#editor-preview-container #av-text",function(){a.load_settings(),$("#modal-edit-text").modal()}),$(document).on("click","#editor-preview-container #av-error",function(){a.load_settings(),$("#modal-edit-error").modal()}),$(document).on("click","#editor-preview-container #av-submit",function(){a.load_settings(),$("#modal-edit-submit").modal()}),$(document).on("click","#button-confirm-edit-title",function(){a.update_settings(),a.redraw()}),$(document).on("click","#button-confirm-edit-text",function(){a.update_settings(),a.redraw()}),$(document).on("click","#button-confirm-edit-submit",function(){a.update_settings(),a.redraw()}),$(document).on("click","#button-confirm-edit-error-message",function(){a.update_settings(),a.redraw()}),$(document).on("click",".color-box",function(){$(".color-box-selected").removeClass("color-box-selected"),$(this).addClass("color-box-selected"),a.update_settings(),a.redraw()})},Editor.prototype.load_settings=function(){$("#checkbox-enabled").get(0).checked=1===parseInt(settings.enabled,10)?!0:!1,"birthday"==settings.mode&&$("#checkbox-mode-birthday").parent().button("toggle"),"age"==settings.mode&&$("#checkbox-mode-age").parent().button("toggle"),"confirmation"==settings.mode&&$("#checkbox-mode-confirmation").parent().button("toggle"),$("#input-age").val(parseInt(settings.minimum_age,10)),$("#input-cookie-expiration").val(parseInt(settings.cookie_expiration,10)),$("#input-safe-url").val(settings.safe_url),$("#checkbox-safe-url-enabled").get(0).checked=1==parseInt(settings.safe_url_enabled,10)?!0:!1,"pop_in"==settings.animation&&$("#checkbox-animation-pop-in").parent().button("toggle"),"slide"==settings.animation&&$("#checkbox-animation-slide").parent().button("toggle"),"none"==settings.animation&&$("#checkbox-animation-none").parent().button("toggle"),$("#input-title").val(settings.title),$("#textarea-text").val(settings.text),$("#input-submit-button").val(settings.submit_text),$("#textarea-error-message").val(settings.error_message),$(".color-box").each(function(){$(this).data("color")==settings.background&&($(".color-box-selected").removeClass("color-box-selected"),$(this).addClass("color-box-selected"))})},Editor.prototype.update_form=function(){},Editor.prototype.update_settings=function(){settings.enabled=$("#checkbox-enabled").get(0).checked?1:0,$("#checkbox-mode-birthday").get(0).checked&&(settings.mode="birthday"),$("#checkbox-mode-age").get(0).checked&&(settings.mode="age"),$("#checkbox-mode-confirmation").get(0).checked&&(settings.mode="confirmation"),settings.minimum_age=parseInt($("#input-age").val(),10),settings.cookie_expiration=parseInt($("#input-cookie-expiration").val(),10),settings.safe_url=$("#input-safe-url").val(),settings.safe_url_enabled=$("#checkbox-safe-url-enabled").get(0).checked?1:0,$("#checkbox-animation-pop-in").get(0).checked&&(settings.animation="pop_in"),$("#checkbox-animation-slide").get(0).checked&&(settings.animation="slide"),$("#checkbox-animation-none").get(0).checked&&(settings.animation="none"),settings.title=$("#input-title").val(),settings.text=$("#textarea-text").val(),settings.submit_text=$("#input-submit-button").val(),settings.error_message=$("#textarea-error-message").val(),settings.background=$(".color-box-selected").data("color")},Editor.prototype.preview=function(){var jquery=$.age_verifier_get_jquery();eval(jquery)},Editor.prototype.delete_cookies=function(){var a={action:"delete_cookies"};$.post(ajaxurl,a).done(function(a){})},$(document).ready(function(){})}(jQuery,window,document);