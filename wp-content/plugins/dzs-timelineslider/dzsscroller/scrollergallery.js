(function(e){e.fn.prependOnce=function(c,k){var p=e(this);if("undefined"==typeof k){var q=/class="(.*?)"/.exec(c);"undefined"!=typeof q[1]&&(k="."+q[1])}return 1>p.children(k).length?(p.prepend(c),!0):!1};e.fn.appendOnce=function(c,k){var p=e(this);if("undefined"==typeof k){var q=/class="(.*?)"/.exec(c);"undefined"!=typeof q[1]&&(k="."+q[1])}return 1>p.children(k).length?(p.append(c),!0):!1};e.fn.scrollergallery=function(c){c=e.extend({scrollerSettings:{},galleryType:"scroller",settings_fullwidthHack:"off",
    layout:"masonry",innerWidth:"0",design_bgpadding:"100",design_bgrotation:"10",design_parallaxeffect:"off",design_itemwidth:"",design_itemheight:"",settings_lightboxlibrary:"zoombox"},c);c.design_bgpadding=parseInt(c.design_bgpadding,10);c.design_bgrotation=parseInt(c.design_bgrotation,10);!1==isNaN(parseInt(c.design_itemheight,10))&&(c.design_itemheight=parseInt(c.design_itemheight,10));!1==isNaN(parseInt(c.design_itemwidth,10))&&(c.design_itemheight=parseInt(c.design_itemheight,10));this.each(function(){function k(a){G++;
    G>=D&&p()}function p(){!0!=H&&(H=!0,"masonry"==c.layout&&h.masonry({columnWidth:1}),"collage"==c.layout&&h.collagePlus({targetHeight:100}),s=h.width(),d.bind("mousemove",q),"scroller"==c.type&&(h=d.find(".inner").eq(0),d.scroller(c.scrollerSettings),t=d.find(".scroller").eq(0),t.addClass("con-items"),I()),"arrows"==c.type&&Y(),"zoombox"==c.settings_lightboxlibrary&&e(".zoombox").zoomBox(),"prettyPhoto"==c.settings_lightboxlibrary&&jQuery.fn.prettyPhoto&&d.find("a[rel^='prettyPhoto']").prettyPhoto())}
    function q(a){J=a.pageX-d.offset().left;K=a.pageY-d.offset().top;"on"==c.design_parallaxeffect&&(v=w=0,x&&(w=J/y-.5,v=K/z-.5),clearTimeout(L),L=setTimeout(Z,10))}function Z(){d.find(".the-bg").eq(0).css({transform:"translate3d("+(6*w-3)+"%,"+(6*v-3)+"%,0)"});t.css({transform:"translate3d("+(12*w-6)+"px,"+(12*v-6)+"px,0)"})}function Y(){d.addClass("type-arrows");h=d.find(".inner").eq(0);h.wrap('<div class="con-items clip-inners"><div class="inners"></div></div>');f=d.find(".inners").eq(0);t=d.find(".con-items").eq(0);
        var a=[],b=0;h.children().each(function(){var b=e(this);0==parseInt(b.css("top"),10)&&a.push(parseInt(b.css("left"),10))});for(l=a.length-1;0<l;l--)b=-a[l],m.push(b);m.push(0);var M=a.length-1;for(l=1;l<a.length;l++)b=s-a[M],m.push(b),M--;r=parseInt(m.length/2,10);f.append(h.clone());f.append(h.clone());f.children().eq(0).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var a=jQuery(this);void 0!=a.attr("data-prettyPhotoGallery")&&""!=a.attr("data-prettyPhotoGallery")&&a.children("a").attr("rel",
                a.children("a").attr("rel")+"1")});f.children().eq(1).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var a=jQuery(this);void 0!=a.attr("data-prettyPhotoGallery")&&""!=a.attr("data-prettyPhotoGallery")&&a.children("a").attr("rel",a.children("a").attr("rel")+"2")});f.children().eq(2).find("div.sgitem[data-type=imageandprettyphoto]").each(function(){var a=jQuery(this);void 0!=a.attr("data-prettyPhotoGallery")&&""!=a.attr("data-prettyPhotoGallery")&&a.children("a").attr("rel",a.children("a").attr("rel")+
            "3")});"masonry"==c.layout&&f.children().addClass("masonry");"collage"==c.layout&&f.children().addClass("layout-collage");f.children().eq(0).css("left",-s);f.children().eq(1).css("left",0);f.children().eq(2).css("left",s);d.append('<div class="arrowleft-con"><div class="arrowleft"></div></div>');d.append('<div class="arrowright-con"><div class="arrowright"></div></div>');n=A;f.css("left",n);"on"==c.settings_fullwidthHack&&(N=d.offset().left,O=jQuery(window).width());d.find(".arrowright-con").bind("click",
            $);d.find(".arrowleft-con").bind("click",aa);I()}function aa(){var a=r;a++;a>=m.length?P():E(a)}function $(){var a=r;a--;0>a?P():E(a)}function P(){!0!=B&&(0==r&&(n+=s,f.css("left",n)),r>=m.length-1&&(n-=s,f.css("left",n)),E(parseInt(m.length/2,10)))}function Q(){"on"==c.design_parallaxeffect&&"arrows"==c.type&&(t.css({left:c.design_bgpadding,width:y-2*c.design_bgpadding,height:z-2*c.design_bgpadding,overflow:"hidden"}),x&&(f.css({left:0}),A=0))}function E(a){!0!=B&&(B=!0,r=a,f.animate({left:m[a]+
        A},{queue:!1,complete:ba}),n=m[a]+A,r=a)}function ba(){B=!1}function ca(a){var b=e(this),c=b.parent().children().index(b);if(!0!=u[c]){var d=a.pageX-b.offset().left;a=a.pageY-b.offset().top;b=R(d,a,b.width(),b.height());"left"==b&&e(this).find(".desc").css(F);"right"==b&&e(this).find(".desc").css(S);"top"==b&&e(this).find(".desc").css(T);"bottom"==b&&e(this).find(".desc").css(U);e(this).find(".desc").eq(0).stop().animate({left:0,top:0},{duration:300,queue:!0,complete:da,easing:V});u[c]=!0}}function ea(a){var b=
        e(this),c=b.parent().children().index(b),d=a.pageX-b.offset().left;a=a.pageY-b.offset().top;b=R(d,a,b.width(),b.height());d=F;"left"==b&&(d=F);"right"==b&&(d=S);"top"==b&&(d=T);"bottom"==b&&(d=U);e(this).find(".desc").eq(0).animate(d,{duration:300,queue:!0,complete:fa,easing:V});u[c]=!0}function da(){var a=e(this).parent().parent().children().index(e(this).parent());u[a]=!1}function fa(){var a=e(this),a=a.parent().parent().children().index(a.parent());u[a]=!1}function C(a,b,c,d){a-=c;b-=d;return a*
        a+b*b}function R(a,b,c,d){var e=C(a,b,c/2,0),g=C(a,b,c/2,d),f=C(a,b,0,d/2);a=C(a,b,c,d/2);switch(Math.min(e,g,f,a)){case f:return"left";case a:return"right";case e:return"top";case g:return"bottom"}}function I(){d.parent().hasClass("scroller-gallery-con")&&(W=d.parent(),W.children(".preloader").fadeOut("slow"));y=d.width();z=d.height();0==d.css("opacity")&&d.animate({opacity:1},600);x&&t.css({top:c.design_bgpadding});1==d.find(".real-inner").length&&(h=d.find(".real-inner"));for(l=0;l<D;l++)u[l]=
        !1;d.find(".inner").children().each(function(){var a="page",b=e(this);b.hasClass("a-image")&&(a="image");b.hasClass("a-video")&&(a="video");b.find(".desc").children("div").append('<div class="icon '+a+'"></div>');a="";"image"==b.attr("data-type")&&void 0!=b.attr("data-link")&&""!=b.attr("data-link")&&(a+='<a href="'+b.attr("data-link")+'">',a+="</a>");"imageandlightbox"==b.attr("data-type")&&("prettyPhoto"==c.settings_lightboxlibrary&&(a='<a href="'+b.attr("data-link")+'" rel="prettyPhoto',void 0!=
        b.attr("data-lightboxgallery")&&""!=b.attr("data-lightboxgallery")&&(a+="["+b.attr("data-lightboxgallery")+']"')),"zoombox"==c.settings_lightboxlibrary&&(a='<a href="'+b.attr("data-link")+'" class="zoombox"',void 0!=b.attr("data-lightboxgallery")&&""!=b.attr("data-lightboxgallery")&&(a+=' data-biggallery="'+b.attr("data-lightboxgallery")+'" data-biggallerythumbnail="'+b.attr("data-src")+'"')),a+="></a>");""!=a&&b.find(".fake-link").wrap(a)});d.find(".inner").children().bind("mouseenter",ca);d.find(".inner").children().bind("mouseleave",
        ea);e(window).bind("resize",X);X();Q()}function X(){y=d.width();z=d.height();"on"==c.settings_fullwidthHack&&(aux=0,aux=N+(jQuery(window).width()-O)/2,0>aux&&(aux=0),d.css("left",-aux));Q()}c.innerWidth=parseInt(c.innerWidth,10);var y=0,z=0,s=0,N=0,O=0,d=e(this),h,f,W,m=[],n=0,r=0,t,B=!1,u=[],H=!1,G=0,D,A=50,V="linear",l=0,x=!1,F={left:"-100%",top:0},S={left:"100%",top:0},T={left:"0",top:"-100%"},U={left:"0",top:"100%"},J=0,K=0,w,v,L=0;(function(){h=d.find(".inner").eq(0);0!=c.innerWidth&&h.css("width",
        c.innerWidth);D=h.children().length;0<d.children(".clip-bg").length&&(x=!0);h.children().each(function(){var a=e(this);if(a.hasClass("sgitem-tobe")){a.removeClass("sgitem-tobe");var b="",d="",f="",h=!1;isNaN(parseInt(c.design_itemwidth,10))||(d=" width: "+c.design_itemwidth+"px;");isNaN(parseInt(c.design_itemheight,10))||(f=" height: "+c.design_itemheight+"px;");var g="data-itemwidth";a.attr(g)&&""!=a.attr(g)&&(d=-1<a.attr(g).indexOf("%")?" width: "+a.attr(g)+";":" width: "+a.attr(g)+"px;");g="data-itemheight";
        a.attr(g)&&""!=a.attr(g)&&(f=-1<a.attr(g).indexOf("%")?" height: "+a.attr(g)+";":" height: "+a.attr(g)+"px;");""!=d&&(h=!0);g='<img src="'+a.attr("data-src")+'" style="'+d+f+'"/>';h&&(g='<div class="imgtobg" style="'+d+f+" background-image:url("+a.attr("data-src")+')"></div>');"undefined"==typeof a.attr("data-type")&&a.attr("data-type","image");"image"==a.attr("data-type")&&(b="",""!=a.attr("data-link")&&void 0!=a.attr("data-link")&&(b+='<a href="'+a.attr("data-link")+'">'),b+=g,""!=a.attr("data-link")&&
            void 0!=a.attr("data-link")&&(b+="</a>"),a.prepend(b),"on"==a.attr("data-link_wholecontainer")&&""!=a.attr("data-link")&&void 0!=a.attr("data-link")&&a.wrapInner('<a href="'+a.attr("data-link")+'"></a>'));"imageandlightbox"==a.attr("data-type")&&(0==a.find(".desc").length&&("prettyPhoto"==c.settings_lightboxlibrary&&(b='<a href="'+a.attr("data-link")+'" rel="prettyPhoto',void 0!=a.attr("data-lightboxgallery")&&""!=a.attr("data-lightboxgallery")&&(b+="["+a.attr("data-lightboxgallery")+']"')),"zoombox"==
            c.settings_lightboxlibrary&&(b='<a href="'+a.attr("data-link")+'" class="zoombox"',void 0!=a.attr("data-lightboxgallery")&&""!=a.attr("data-lightboxgallery")&&(b+=' data-biggallery="'+a.attr("data-lightboxgallery")+'"')),b+=">"),b+=g,0==a.find(".desc").length&&(b+="</a>"),a.prepend(b),"on"==a.attr("data-link_wholecontainer")&&""!=a.attr("data-link")&&void 0!=a.attr("data-link")&&(b="","prettyPhoto"==c.settings_lightboxlibrary&&(b='<a href="'+a.attr("data-link")+'" rel="prettyPhoto',void 0!=a.attr("data-lightboxgallery")&&
            ""!=a.attr("data-lightboxgallery")&&(b+="["+a.attr("data-lightboxgallery")+']"')),"zoombox"==c.settings_lightboxlibrary&&(b='<a href="'+a.attr("data-link")+'" class="zoombox"',void 0!=a.attr("data-lightboxgallery")&&""!=a.attr("data-lightboxgallery")&&(b+=' data-biggallery="'+a.attr("data-lightboxgallery")+'"')),a.wrapInner(b+"></a>")))}a.addClass("sgitem");a="IMG"==a.get(0).nodeName?a.get(0):a.find("img").eq(0).get(0);void 0==a?k():!0==a.complete&&0!=a.naturalWidth?k():jQuery(a).bind("load",k)});
        setTimeout(p,5E3)})();return this})};window.dzssg_init=function(c,k){e(c).scrollergallery(k)}})(jQuery);